function LightGal(a){this.opts={fade:true,fade_time:1e3,display_time:2e3,display_thumbs:false,main_width:400,main_height:300,thumb_width:165,thumb_height:110};for(opt in a){if(opt in this.opts){this.opts[opt]=a[opt]}}if(!this.opts.fade)this.opts.fade_time=0}function getSupportedProp(a){var b=document.documentElement;for(var c=0;c<a.length;c++){if(typeof b.style[a[c]]=="string"){return a[c]}}}LightGal.prototype.userSelectImage=function(a){if(!typeof a.target===HTMLImageElement)return;this.doLoop=false;this.curr_img.className="lg_hidden";setTimeout(function(){var b=this.srcs[this.getNextSrc()];this.curr_img.setAttribute("src",a.target.getAttribute("src"));this.curr_img.className=""}.bind(this),this.opts.fade_time);setTimeout(function(){this.doLoop=true}.bind(this),this.opts.display_time)};LightGal.prototype.begin=function(a){images=a.getElementsByTagName("img");this.srcs=[];for(i=0;i<images.length;i++){this.srcs.push(images[i].getAttribute("src"))}a.innerHTML="";this.curr_img=document.createElement("img");this.curr_img.setAttribute("src",this.srcs[0]);this.curr_img.setAttribute("width",this.opts.main_width);this.curr_img.setAttribute("height",this.opts.main_height);var b=getSupportedProp(["transition","MozTransition","WebkitTransition","msTransition","OTransition"]);this.curr_img.style[b]="opacity "+this.opts.fade_time/2+"ms linear";a.appendChild(this.curr_img);if(this.opts.display_thumbs){this.thumb_el=document.createElement("div");this.thumb_el.setAttribute("id","lg_thumbs");for(i=0;i<this.srcs.length;i++){var c=document.createElement("img");c.setAttribute("width",this.opts.thumb_width);c.setAttribute("height",this.opts.thumb_height);c.setAttribute("src",this.srcs[i]);this.thumb_el.appendChild(c);c.addEventListener("click",this.userSelectImage.bind(this),false)}a.appendChild(this.thumb_el)}this.doLoop=true;this.transition()};LightGal.prototype.getNextSrc=function(){var a=this.srcs.indexOf(this.curr_img.getAttribute("src"));return a===this.srcs.length-1?0:a+1};LightGal.prototype.transition=function(){setInterval(function(){if(this.doLoop){this.curr_img.className="lg_hidden";setTimeout(function(){if(this.doLoop){var a=this.srcs[this.getNextSrc()];this.curr_img.setAttribute("src",a);this.curr_img.className=""}}.bind(this),this.opts.fade_time)}}.bind(this),this.opts.display_time+this.opts.fade_time*2)}